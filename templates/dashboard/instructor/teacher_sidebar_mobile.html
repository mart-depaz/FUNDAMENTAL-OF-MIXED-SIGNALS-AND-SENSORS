<!-- templates/dashboard/instructor/teacher_sidebar_mobile.html - Mobile-Responsive Sidebar for Instructor Dashboard -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
<style>
    .cropper-container {
        max-width: 100%;
        max-height: 500px;
        min-height: 300px;
        position: relative;
        background-color: transparent;
    }
    
    /* Ensure crop box is visible - overlay only outside crop area */
    .cropper-container .cropper-crop-box {
        border: 2px solid #3b82f6 !important;
        box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5) !important;
        background-color: transparent !important;
    }
    
    /* Make sure the image area doesn't have grey background */
    .cropper-container .cropper-canvas {
        background-color: transparent !important;
    }
    
    .cropper-container .cropper-view-box {
        outline: 1px solid rgba(59, 130, 246, 0.5) !important;
        background-color: transparent !important;
    }
    
    /* Background overlay for the entire cropper container (outside the image) */
    .cropper-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #f3f4f6;
        z-index: -1;
    }
    
    /* Make all crop box handles more visible */
    .cropper-container .cropper-crop-box .cropper-point {
        width: 10px !important;
        height: 10px !important;
        background-color: #3b82f6 !important;
        border: 2px solid #ffffff !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3) !important;
    }
    
    .cropper-container .cropper-crop-box .cropper-point:hover {
        background-color: #2563eb !important;
        transform: scale(1.15);
        transition: all 0.2s;
    }
    
    /* Remove underlines from all sidebar links and buttons */
    .sidebar-link,
    .sidebar-link:hover,
    .sidebar-link:focus,
    .sidebar-link:active,
    .sidebar-link:visited {
        text-decoration: none !important;
    }
    
    .sidebar-link span,
    .sidebar-link .font-medium {
        text-decoration: none !important;
    }
    
    #sidebar a,
    #sidebar a:hover,
    #sidebar a:focus,
    #sidebar a:active,
    #sidebar a:visited {
        text-decoration: none !important;
    }
    
    #sidebar button,
    #sidebar button:hover,
    #sidebar button:focus,
    #sidebar button:active {
        text-decoration: none !important;
    }
    
    /* Mobile sidebar improvements */
    @media (max-width: 768px) {
        #sidebar {
            width: 70vw !important;
            max-width: 280px !important;
            padding: 1rem !important;
        }
        
        .sidebar-menu-item {
            padding: 0.75rem 0.5rem !important;
            font-size: 0.9rem !important;
        }
        
        .sidebar-menu-item i {
            font-size: 1rem !important;
            width: 20px !important;
        }
        
        .sidebar-section-label {
            font-size: 0.75rem !important;
            padding: 0.5rem !important;
        }
        
        /* Improve touch targets */
        #sidebar button,
        #sidebar a {
            padding: 0.75rem !important;
            min-height: 44px;
        }
    }
    
    @media (max-width: 640px) {
        #sidebar {
            width: 80vw !important;
            max-width: 240px !important;
            padding: 0.75rem !important;
        }
    }
    
    /* Smooth sidebar toggle animation */
    #sidebar {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    #sidebar.open {
        transform: translateX(0);
    }
    
    #sidebar-overlay {
        transition: opacity 0.3s ease;
    }
</style>

<!-- Mobile Overlay -->
<div id="sidebar-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-40 lg:hidden hidden"></div>

<!-- Sidebar Content -->
<aside id="sidebar" class="fixed inset-y-0 left-0 transform -translate-x-full lg:translate-x-0 lg:fixed lg:w-64 w-64 text-white p-6 shadow-2xl transition-transform duration-300 ease-in-out z-40 flex flex-col relative overflow-hidden overflow-y-auto" style="background: linear-gradient(180deg, #3C4770 0%, #447294 100%); box-shadow: 2px 0 10px rgba(60, 71, 112, 0.3); top: 64px; height: calc(100vh - 64px); -webkit-overflow-scrolling: touch;">
    <!-- Header - Fixed at top -->
    <div class="flex items-center justify-between mb-8 pb-4 border-b flex-shrink-0" style="border-color: rgba(190, 129, 153, 0.3);">
        <div class="flex items-center">
            <i class="fas fa-chalkboard-teacher text-2xl mr-2" style="color: #BE8199;"></i>
            <h2 class="text-xl md:text-2xl font-bold tracking-wider">Instructor</h2>
        </div>
        <button class="lg:hidden p-1 rounded-full hover:bg-white/20 flex items-center justify-center min-h-10 min-w-10">
            <i class="fas fa-times text-lg md:text-xl"></i>
        </button>
    </div>

    <!-- Menu Items Container - Scrollable -->
    <nav class="flex-1 overflow-y-auto space-y-1 pb-4" style="scrollbar-width: thin; scrollbar-color: rgba(255,255,255,0.2) transparent;">
        <!-- Dashboard Section -->
        <div class="mb-4">
            <p class="text-xs font-bold text-white/60 uppercase tracking-wider px-3 mb-2">Dashboard</p>
            <a href="{% url 'dashboard:teacher_dashboard' %}" class="sidebar-link block px-3 py-2.5 md:py-3 rounded-lg hover:bg-white/15 transition duration-150 flex items-center gap-3 text-white" style="text-decoration: none;">
                <i class="fas fa-home w-5 h-5 flex-shrink-0"></i>
                <span class="text-sm md:text-base">Dashboard</span>
            </a>
        </div>

        <!-- Attendance Section -->
        <div class="mb-4">
            <p class="text-xs font-bold text-white/60 uppercase tracking-wider px-3 mb-2">Attendance</p>
            <a href="{% url 'dashboard:students' %}" class="sidebar-link block px-3 py-2.5 md:py-3 rounded-lg hover:bg-white/15 transition duration-150 flex items-center gap-3 text-white" style="text-decoration: none;">
                <i class="fas fa-user-graduate w-5 h-5 flex-shrink-0"></i>
                <span class="text-sm md:text-base">Students</span>
            </a>
            <a href="{% url 'dashboard:instructor_courses' %}" class="sidebar-link block px-3 py-2.5 md:py-3 rounded-lg hover:bg-white/15 transition duration-150 flex items-center gap-3 text-white" style="text-decoration: none;">
                <i class="fas fa-book w-5 h-5 flex-shrink-0"></i>
                <span class="text-sm md:text-base">Courses</span>
            </a>
        </div>

        <!-- Reports Section -->
        <div class="mb-4">
            <p class="text-xs font-bold text-white/60 uppercase tracking-wider px-3 mb-2">Reports</p>
            <a href="{% url 'dashboard:instructor_attendance_reports' %}" class="sidebar-link block px-3 py-2.5 md:py-3 rounded-lg hover:bg-white/15 transition duration-150 flex items-center gap-3 text-white" style="text-decoration: none;">
                <i class="fas fa-chart-bar w-5 h-5 flex-shrink-0"></i>
                <span class="text-sm md:text-base">Attendance Reports</span>
            </a>
        </div>

        <!-- Schedule Section -->
        <div class="mb-4">
            <p class="text-xs font-bold text-white/60 uppercase tracking-wider px-3 mb-2">Schedule</p>
            <a href="{% url 'dashboard:weekly_timetable' %}" class="sidebar-link block px-3 py-2.5 md:py-3 rounded-lg hover:bg-white/15 transition duration-150 flex items-center gap-3 text-white" style="text-decoration: none;">
                <i class="fas fa-calendar-alt w-5 h-5 flex-shrink-0"></i>
                <span class="text-sm md:text-base">Weekly Timetable</span>
            </a>
        </div>
    </nav>

    <!-- Footer Section - Fixed at bottom -->
    <div class="border-t flex-shrink-0 pt-4 mt-4" style="border-color: rgba(190, 129, 153, 0.3);">
        <button onclick="openProfileModal()" class="sidebar-link w-full px-3 py-2.5 md:py-3 rounded-lg hover:bg-white/15 transition duration-150 flex items-center gap-3 text-white text-left" style="text-decoration: none; border: none; background: none; cursor: pointer;">
            <i class="fas fa-user-circle w-5 h-5 flex-shrink-0"></i>
            <span class="text-sm md:text-base">Profile</span>
        </button>
        <a href="{% url 'logout' %}" class="sidebar-link block px-3 py-2.5 md:py-3 rounded-lg hover:bg-white/15 transition duration-150 flex items-center gap-3 text-white" style="text-decoration: none;">
            <i class="fas fa-sign-out-alt w-5 h-5 flex-shrink-0"></i>
            <span class="text-sm md:text-base">Logout</span>
        </a>
    </div>
</aside>

<!-- Note: sidebar behavior (toggle, overlay, link-close, resize) is handled by static/js/instructor_mobile.js -->
